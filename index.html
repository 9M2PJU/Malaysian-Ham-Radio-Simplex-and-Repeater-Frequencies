<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Malaysian Ham Radio Frequencies</title>
  <meta name="description" content="A comprehensive frequency database for Malaysian amateur radio operators and PMR users. CHIRP-ready, categorized by Simplex, Repeaters, and PMR." />
  <meta name="keywords" content="Ham Radio, Malaysia, Amateur Radio, Repeater, Simplex, PMR, CHIRP, 9M2PJU, Frequencies" />
  <meta name="author" content="9M2PJU" />
  <meta property="og:title" content="Malaysian Ham Radio Frequencies" />
  <meta property="og:description" content="CHIRP-compatible Malaysian ham radio frequency list categorized by Simplex, Repeaters, and PMR." />
  <meta property="og:url" content="https://frequency.hamradio.my" />
  <meta property="og:type" content="website" />
  <link rel="icon" href="https://pass.hamradio.my/favicon.ico" type="image/x-icon" />
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @media print {
      header, footer, input, button { display: none !important; }
      body { background: white !important; color: black !important; }
    }
    #photo { display: none; margin-top: 1rem; }
    .clickable { color: #3b82f6; cursor: pointer; text-decoration: underline; }
  </style>
</head>
<body class="bg-gray-900 text-gray-100">

  <header class="bg-gray-900 p-4 shadow print:hidden">
    <div class="max-w-4xl mx-auto">
      <h1 class="text-2xl font-bold">📡 Malaysian Ham Radio Frequencies Collection</h1>
      <p class="text-sm text-gray-400">A comprehensive frequency database for Malaysian amateur radio operators and PMR users</p>
    </div>
  </header>

  <main class="max-w-4xl mx-auto p-4">
    <section class="mb-6">
      <p class="mb-2">Welcome to the most comprehensive collection of Malaysian amateur radio frequencies! This repository contains meticulously curated CSV files with simplex frequencies, repeater configurations, and PMR channels specifically designed for radio operators in Malaysia.</p>
      <ul class="list-disc pl-5 text-sm text-gray-300">
        <li>🔄 CHIRP Ready – Direct import compatibility</li>
        <li>📊 Comprehensive Coverage – Amateur radio + PMR frequencies</li>
        <li>🇲🇾 Malaysia Focused – Locally relevant frequency allocations</li>
        <li>🎨 Easy Integration – One-click radio programming</li>
        <li>🔧 Regularly Updated – Community-driven maintenance</li>
      </ul>
    </section>

    <div class="mb-4">
      <a href="https://github.com/9M2PJU/Malaysian-Ham-Radio-Simplex-and-Repeater-Frequencies" class="underline text-blue-400 block mb-2" target="_blank">🔗 GitHub Repository</a>
      <a href="9M2PJU.csv" download class="inline-block bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm">⬇️ Download CSV</a>
    </div>

    <div class="mb-4">
      <input id="search" type="text" placeholder="🔍 Search..." class="w-full px-4 py-2 border border-gray-600 bg-gray-800 rounded text-sm" />
    </div>

    <div id="output">
      <p class="text-center text-gray-400">Loading data...</p>
    </div>
  </main>

  <footer class="text-center text-sm text-gray-500 mt-8 mb-6 print:hidden">
    <p>If you want to support this community project, click <span class="clickable" onclick="togglePhoto()">here</span></p>
    <img id="photo" src="https://drive.google.com/thumbnail?id=1lf1zgIN1Kx5cduZM79n3boGDJQ68uSJ_&sz=w800" alt="Support Image" class="mx-auto rounded border border-gray-600" />
    <p class="mt-4">Made with ❤️ by <a href="https://hamradio.my" class="underline text-blue-400">9M2PJU</a></p>
  </footer>

  <script>
    const output = document.getElementById('output');
    const searchInput = document.getElementById('search');
    const photo = document.getElementById('photo');
    let allRows = [];

    function togglePhoto() {
      photo.style.display = photo.style.display === 'none' ? 'block' : 'none';
    }

    function bandBadge(freq){
      if(freq >= 446 && freq <= 446.2) return `<span class="px-2 py-0.5 text-xs bg-green-200 text-green-800 rounded">PMR</span>`;
      if(freq < 300) return `<span class="px-2 py-0.5 text-xs bg-blue-200 text-blue-800 rounded">VHF</span>`;
      return `<span class="px-2 py-0.5 text-xs bg-purple-200 text-purple-800 rounded">UHF</span>`;
    }

    function createGroup(title, rows) {
      const section = document.createElement('section');
      section.className = "mb-10";
      const header = document.createElement('h2');
      header.className = "text-xl font-bold mb-3 border-b border-gray-600 pb-1";
      header.textContent = title;
      section.appendChild(header);

      const table = document.createElement('table');
      table.className = "w-full text-sm border border-gray-700";
      table.innerHTML = `
        <thead class="bg-gray-800 text-left">
          <tr>
            <th class="px-2 py-1">Name</th>
            <th class="px-2 py-1">Frequency</th>
            <th class="px-2 py-1">Band</th>
            <th class="px-2 py-1">Offset</th>
            <th class="px-2 py-1">Tone</th>
            <th class="px-2 py-1">Mode</th>
            <th class="px-2 py-1">Comment</th>
          </tr>
        </thead>
        <tbody>
          ${rows.map(r => `
            <tr class="border-t border-gray-700 hover:bg-gray-800">
              <td class="px-2 py-1">${r.Name}</td>
              <td class="px-2 py-1">${r.Frequency}</td>
              <td class="px-2 py-1">${bandBadge(parseFloat(r.Frequency) || 0)}</td>
              <td class="px-2 py-1">${r.Offset}</td>
              <td class="px-2 py-1">${r.Tone}</td>
              <td class="px-2 py-1">${r.Mode}</td>
              <td class="px-2 py-1">${r.Comment}</td>
            </tr>
          `).join('')}
        </tbody>`;
      section.appendChild(table);
      return section;
    }

    function render(rows) {
      output.innerHTML = '';
      const groups = { Simplex: [], Repeaters: [], PMR: [] };

      rows.forEach(r => {
        const f = parseFloat(r.Frequency) || 0;
        const o = parseFloat(r.Offset) || 0;
        if (f >= 446 && f <= 446.2) {
          groups.PMR.push(r);
        } else if (o === 0) {
          groups.Simplex.push(r);
        } else {
          groups.Repeaters.push(r);
        }
      });

      for (const [key, value] of Object.entries(groups)) {
        if (value.length) output.appendChild(createGroup(key + (key === 'PMR' ? ' (446 MHz)' : ''), value));
      }

      if (rows.length === 0) {
        output.innerHTML = '<p class="text-center text-gray-400">No entries found.</p>';
      }
    }

    searchInput.oninput = () => {
      const q = searchInput.value.toLowerCase();
      render(allRows.filter(r => Object.values(r).join(' ').toLowerCase().includes(q)));
    };

    Papa.parse('9M2PJU.csv', {
      download: true,
      header: true,
      complete: res => {
        allRows = res.data.filter(r => r.Name || r.Frequency);
        render(allRows);
      }
    });
  </script>
</body>
</html>
